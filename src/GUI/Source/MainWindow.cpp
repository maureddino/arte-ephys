/*
  ==============================================================================

    This file was auto-generated by the Jucer!

    It contains the basic outline for a simple desktop window.

  ==============================================================================
*/

#include "MainWindow.h"
#include <stdio.h>


//==============================================================================
MainWindow::MainWindow()
    : DocumentWindow (JUCEApplication::getInstance()->getApplicationName(),
                      Colours::darkgrey,
                      DocumentWindow::allButtons)
{
    centreWithSize (500, 400);
    setResizable (true, true);
    setResizeLimits(500, 400, 1000, 800);

    processorGraph = new ProcessorGraph();

    std::cout << "Window width = " << getWidth() << std::endl;
     std::cout << "Window height = " << getHeight() << std::endl;

    setContentComponent (new UIComponent(processorGraph), true, true);

    setVisible (true);

    audioComponent = new AudioComponent();
    

    audioComponent->connectToProcessorGraph(processorGraph);
    audioComponent->beginCallbacks();
}

MainWindow::~MainWindow()
{
  setContentComponent (0);

  audioComponent->disconnectProcessorGraph();

   deleteAndZero(processorGraph);
   deleteAndZero(audioComponent);
  //deleteAllChildren();
}

void MainWindow::closeButtonPressed()
{
    JUCEApplication::getInstance()->systemRequestedQuit();
}
